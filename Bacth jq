

variable "job_queue_name" {
  description = "Specifies the name of the job queue"
  type        = string
}

variable "priority" {
  description = "The priority of the job queue"
  type        = number
}

variable "state" {
  description = "The state of the job queue"
  type        = string
}

variable "tags" {
  description = "Key-value map of resource tags"
  type        = map(string)
}

// Exclude Fargate-related variables for now
//variable "scheduling_strategy" {
//  description = "The scheduling strategy to use for the job queue"
//  type        = string
//}

//variable "priority_adjustment" {
//  description = "The priority adjustment of the job queue"
//  type        = number
//}


example.tf



module "aws_batch_job_queue" {
  source = "path/to/aws_batch_job_queue"

  job_queue_name         = "example-job-queue"
  compute_environments   = [
    {
      compute_environment = "compute-env-1"
      order               = 1
    },
    {
      compute_environment = "compute-env-2"
      order               = 2
    }
  ]
  priority               = 1
  scheduling_policy_arn  = null
  state                  = "ENABLED"
  tags                   = {
    "Environment" = "Production"
    "Team"        = "DevOps"
  }
}

# changes after

module "aws_batch_job_queue" {
  source = "path/to/module"

  job_queue_name = "example-job-queue"
  priority       = 1
  state          = "ENABLED"
  tags           = {
    Environment = "Production"
    Project     = "MyProject"
  }

  // Exclude Fargate-related arguments for now
  //scheduling_strategy = "FIFO"
  //priority_adjustment = 5
}

// Add more examples if needed


## end


resource "aws_batch_job_queue" "this" {
  name                 = var.job_queue_name
  # compute_environments = var.compute_environments
  priority             = var.priority
  # scheduling_policy_arn = var.scheduling_policy_arn
  state                = var.state
  tags                 = var.tags
}


# updated


resource "aws_batch_job_queue" "this" {
  name                = var.job_queue_name
  priority            = var.priority
  state               = var.state
  tags                = var.tags

  compute_environments = [
    {
      compute_environment = aws_batch_compute_environment.this.arn
      order               = 1
    },
    // Add additional compute environments here if needed
  ]

  // Exclude Fargate-related arguments for now
  //scheduling_strategy = var.scheduling_strategy
  //priority_adjustment = var.priority_adjustment
  //state               = var.state
  //tags                = var.tags
}





output "job_queue_arn" {
  value       = aws_batch_job_queue.this.arn
   = "The Amazon Resource Name of the job queue."
}

output "tags_all" {
  value       = aws_batch_job_queue.this.tags_all
  description = "A map of tags assigned to the resource, including those inherited from the provider default_tags configuration block."
}







